<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <script src="https://cdn.jsdelivr.net/npm/http-vue-loader@1.4.0/src/httpVueLoader.js"></script>
	<script src="/js/model.js"></script>
	<script src="/js/util.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    <title>KMS Test Page</title>
</head>

<body>
<div>KMS Test Page</div>

<v-app id='test'>
		<span>
			TreeTest
		<tree-component ref="tree" :items="datas" :busname="'treebus'" :cachekey="'name'"></tree-component>
		<input style="border-style:ridge" v-model="text"/>
		<button style="border-style:ridge" @click="Register">Register</button>
		<button style="border-style:ridge" @click="Delete">Delete</button>
		<button style="border-style:ridge" @click="Edit">Edit</button>
		</span>
</v-app>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>

<script type="text/javascript">
    console.log("test");
	Vue.use(Vuetify);

	httpVueLoader.register(Vue, 'view/custom/tree-component.vue');
    httpVueLoader.register(Vue, 'view/custom/treenode-component.vue');
	httpVueLoader.register(Vue, 'view/custom/table-component.vue');
    Vue.component('tree-component')
    Vue.component('treenode-component')
	Vue.component('table-component')

	EventBus = new Vue();

    var main = new Vue({
        data: function data() {
            return {
            	//table
				header :  [
					{text: 'Dessert (100g serving)', value: 'name'},
					{ text: 'Calories', value: 'calories' },
					{ text: 'Fat (g)', value: 'fat' },
					{ text: 'Carbs (g)', value: 'carbs' },
					{ text: 'Protein (g)', value: 'protein' },
					{ text: 'Iron (%)', value: 'iron' },
					{ text: 'aa', value : 'bb'}
				],
				//tree
                text: "",
                datas: {
                    name: 'T1',
                    
                }
            }
        },
        methods: {
        	Register: function Register() {
                console.log(this.activesub);
                axios.post('/write/register',{
                    
                })
                .then(
                  function(response){
                    _this.answers.push(response.data);
                    console.log(response.data);
                  }
                )
                .catch(function(error){
                  console.log("[ERR] : " + error)
                })
            },
            Delete: function Delete() {
                console.log(this.activesub);
                this.$refs.tree.deleteNode();
            },
            Edit: function Edit() {
                console.log(this.activesub);
                this.$refs.tree.moveNode(this.text);
            },
            
			//table function
			page : function page(item) {
            	console.log(JSON.stringify(item))
				var _this = this
				return new Promise(function (resolve, reject) {
					var items = _this.getItem()
					var total = items.length
					if (item.page > 0 && item.size > 0) {
						items = items.slice((item.page - 1) * item.size, item.page * item.size)
						console.log(items)
					}
					resolve(new function(){
						return {
							data : {
								content : items,
								totalElements : total
							}
						}
					})
				})
			}
        }
    }).$mount('#test');
</script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <script src="https://cdn.jsdelivr.net/npm/http-vue-loader@1.4.0/src/httpVueLoader.js"></script>
	<script src="/js/model.js"></script>
	<script src="/js/util.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    <title>KMS Test Page</title>
</head>

<body>
<div>KMS Table Test Page</div>

<v-app id='test'>
		<span>
		<table-component ref="table" :headers="tableHeader" :allow-select="true" :selection.sync="selection"
			:page-req="page"
		>
		</table-component>
		</span>
		<v-btn @click="addtable">ADD BUTTON</v-btn>
</v-app>

<script src="/js/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>

<script type="text/javascript">
    console.log("test");
	Vue.use(Vuetify);
	httpVueLoader.register(Vue, 'view/custom/table-component.vue');
	Vue.component('table-component');

    var main = new Vue({
        data: function data() {
            return {
            	//table
				tableHeader : [
					{text: "id", value: "id"},
					{text: "name", value: "name"}
				],
				selection : []
            }
        },
        methods: {
			//table function
			page : function page(item) {
				console.log(JSON.stringify(item));
				var _this = this;
				return new Promise(function (resolve, reject) {
					var items = _this.getItem();
					var total = items.length;
					if (item.page > 0 && item.size > 0) {
						items = items.slice((item.page - 1) * item.size, item.page * item.size);
					}
					resolve(new function(){
						return {
							data : {
								content : items,
								totalElements : total
							}
						}
					})
				})
			},
			addtable : function addtable(item){
				console.log("add Test");
				let aaa = { selected : false , id : "123123" , name : "asdfasdfasdfasdfd"};
            	this.$refs.table.addFunction(aaa);
			},
			getItem : function getItem () {
				return [
					{
						selected : false,
						id: "asdfdf",
						name: 'Frozen Yogurt'
					},
					{
						selected : false,
						id: "1111",
						name: 'Froasdfasdfzen Yogurt'
					},
					{
						selected : true,
						id: "124124",
						name: 'Frozen Yogufffffrt'
					}
				]
			}
        }
    }).$mount('#test');
</script>
</body>

</html>